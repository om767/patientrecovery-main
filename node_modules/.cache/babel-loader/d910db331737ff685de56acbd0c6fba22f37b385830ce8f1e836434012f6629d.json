{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{io}from\"socket.io-client\";import\"./Chatroom.css\";// connect to backend server\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(\"http://localhost:5000\");const Chatroom=()=>{const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[username,setUsername]=useState(\"Patient\");// default role\nuseEffect(()=>{// Listen for incoming messages\nsocket.on(\"receiveMessage\",message=>{setMessages(prev=>[...prev,message]);});// Cleanup listener\nreturn()=>{socket.off(\"receiveMessage\");};},[]);const sendMessage=()=>{if(input.trim()===\"\")return;const newMessage={user:username,text:input};socket.emit(\"sendMessage\",newMessage);setInput(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"chatroom-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatroom-sidebar\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Role\"}),/*#__PURE__*/_jsx(\"button\",{className:username===\"Doctor\"?\"active\":\"\",onClick:()=>setUsername(\"Doctor\"),children:\"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Doctor\"}),/*#__PURE__*/_jsx(\"button\",{className:username===\"Patient\"?\"active\":\"\",onClick:()=>setUsername(\"Patient\"),children:\"\\uD83E\\uDDD1\\u200D\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1 Patient\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"current-role\",children:[\"Current: \",/*#__PURE__*/_jsx(\"strong\",{children:username})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatroom-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatroom-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Connect to your Doctor\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDC68\\u200D\\u2695\\uFE0F Dr. Sharma \",/*#__PURE__*/_jsx(\"span\",{className:\"status-dot\"}),\" Online \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{children:\"Usually available 9 AM - 8 PM\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatroom-messages\",children:messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-bubble \".concat(msg.user===username?\"patient-msg\":\"doctor-msg\"),children:[/*#__PURE__*/_jsxs(\"strong\",{children:[msg.user,\": \"]}),\" \",msg.text]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatroom-input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type your message...\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:e=>e.key===\"Enter\"&&sendMessage()}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"Send\"})]})]})]});};export default Chatroom;","map":{"version":3,"names":["React","useState","useEffect","io","jsx","_jsx","jsxs","_jsxs","socket","Chatroom","messages","setMessages","input","setInput","username","setUsername","on","message","prev","off","sendMessage","trim","newMessage","user","text","emit","className","children","onClick","map","msg","index","concat","type","placeholder","value","onChange","e","target","onKeyPress","key"],"sources":["C:/Users/User/Desktop/patientrecovery-main/src/pages/Chatroom.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\nimport \"./Chatroom.css\";\r\n\r\n// connect to backend server\r\nconst socket = io(\"http://localhost:5000\");\r\n\r\nconst Chatroom = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [username, setUsername] = useState(\"Patient\"); // default role\r\n\r\n  useEffect(() => {\r\n    // Listen for incoming messages\r\n    socket.on(\"receiveMessage\", (message) => {\r\n      setMessages((prev) => [...prev, message]);\r\n    });\r\n\r\n    // Cleanup listener\r\n    return () => {\r\n      socket.off(\"receiveMessage\");\r\n    };\r\n  }, []);\r\n\r\n  const sendMessage = () => {\r\n    if (input.trim() === \"\") return;\r\n\r\n    const newMessage = { user: username, text: input };\r\n    socket.emit(\"sendMessage\", newMessage);\r\n    setInput(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatroom-wrapper\">\r\n      {/* Sidebar for role selection */}\r\n      <div className=\"chatroom-sidebar\">\r\n        <h3>Select Role</h3>\r\n        <button\r\n          className={username === \"Doctor\" ? \"active\" : \"\"}\r\n          onClick={() => setUsername(\"Doctor\")}\r\n        >\r\n          üë®‚Äç‚öïÔ∏è Doctor\r\n        </button>\r\n        <button\r\n          className={username === \"Patient\" ? \"active\" : \"\"}\r\n          onClick={() => setUsername(\"Patient\")}\r\n        >\r\n          üßë‚Äçü§ù‚Äçüßë Patient\r\n        </button>\r\n        <p className=\"current-role\">\r\n          Current: <strong>{username}</strong>\r\n        </p>\r\n      </div>\r\n\r\n      {/* Main chat */}\r\n      <div className=\"chatroom-container\">\r\n        {/* Header */}\r\n        <div className=\"chatroom-header\">\r\n          <h2>Connect to your Doctor</h2>\r\n          <p>\r\n            üë®‚Äç‚öïÔ∏è Dr. Sharma <span className=\"status-dot\"></span> Online <br />\r\n            <small>Usually available 9 AM - 8 PM</small>\r\n          </p>\r\n        </div>\r\n\r\n        {/* Messages */}\r\n        <div className=\"chatroom-messages\">\r\n          {messages.map((msg, index) => (\r\n            <div\r\n              key={index}\r\n              className={`chat-bubble ${\r\n                msg.user === username ? \"patient-msg\" : \"doctor-msg\"\r\n              }`}\r\n            >\r\n              <strong>{msg.user}: </strong> {msg.text}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Input box */}\r\n        <div className=\"chatroom-input\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Type your message...\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyPress={(e) => e.key === \"Enter\" && sendMessage()}\r\n          />\r\n          <button onClick={sendMessage}>Send</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chatroom;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}